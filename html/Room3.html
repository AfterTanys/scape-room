<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/pilgrimage.css" />
    <link rel="stylesheet" href="../css/timer.css" />
    <link rel="stylesheet" href="../css/room3.css" />
    <link rel="stylesheet" href="../css/hud.css" />
    <link rel="stylesheet" href="../css/jeepPuzzle.css" />
    <link rel="stylesheet" href="../css/inventory.css" />
    <title>Room 3 (Jeep)</title>
  </head>
  <body id="room3-background">
    <div class="timer"></div>

    <div class="left-arrow-room" onclick="jumpToRoom(1)"></div>

    <div id="jeep-door-glow"></div>

    <div id="jeep-tower-glow"></div>

    <div id="slide-blue-ball"></div>

    <div id="slide-black-ball"></div>

    <!--TODO: Lo de abajo-->
    <div class="modal-puzzle" id="modal-puzzle-jeep">
      <div id="simon-container">
        <div class="simon-score" id="simon-score">Round 1</div>
        <div id="simon-start-button">
          <button
            class="close-modal-btn"
            id="start-button"
            onclick="playRound()"
          >
            START
          </button>
          <button class="close-modal-btn" id="jeep-puzzle-close-btn">
            CLOSE
          </button>
        </div>
        <div class="simon-first-row">
          <div class="simon-tile" id="simon-first-row-green"></div>
          <div class="simon-tile" id="simon-first-row-red"></div>
          <div class="simon-tile" id="simon-first-row-yellow"></div>
          <div class="simon-tile" id="simon-first-row-green"></div>
        </div>
        <div class="simon-second-row">
          <div class="simon-tile" id="simon-second-row-left"></div>
          <div class="simon-tile" id="simon-second-row-up"></div>
          <div class="simon-tile" id="simon-second-row-right"></div>
          <div class="simon-tile" id="simon-second-row-down"></div>
        </div>
        <div class="simon-third-row">
          <div class="simon-tile" id="simon-third-row-rune1"></div>
          <div class="simon-tile" id="simon-third-row-rune2"></div>
          <div class="simon-tile" id="simon-third-row-rune3"></div>
          <div class="simon-tile" id="simon-third-row-rune4"></div>
        </div>
      </div>
    </div>

    <div id="background-overlay"></div>
  </body>
  <script src="../js/timer.js"></script>
  <script src="../js/hud.js"></script>
  <script src="../js/jeepPuzzle.js"></script>
  <script src="../js/modalOpener.js"></script>
  <script src="../js/inventory.js"></script>
  <script>
    //El siguiente script hace que no puedas hacer zoom en la pagina
    window.addEventListener(
      "wheel",
      (e) => {
        if (e.ctrlKey) {
          e.preventDefault();
        }
      },
      { passive: false }
    );

    //Metodo para recoger la bola azul (Mejorable)
    document
      .getElementById("slide-blue-ball")
      .addEventListener("click", () => {
        slideBallsItem = JSON.parse(localStorage.getItem("slideBallsItem"));
        if(slideBallsItem.includes("blue")){
          console.log("ya tienes la bola azul");
        }else{
          console.log("Has pillado la bola azul");
          slideBallsItem.push("blue");
          localStorage.setItem("slideBallsItem", JSON.stringify(slideBallsItem));
        }
        updateSlideBallsItem(document.getElementsByClassName("inventory-item")[0]);
      });

    //Metodo para recoger la bola negra (Mejorable)
    document
      .getElementById("slide-black-ball")
      .addEventListener("click", () => {
        slideBallsItem = JSON.parse(localStorage.getItem("slideBallsItem"));
        if(slideBallsItem.includes("black")){
          console.log("ya tienes la bola negra");
        }else{
          console.log("Has pillado la bola negra");
          slideBallsItem.push("black");
          localStorage.setItem("slideBallsItem", JSON.stringify(slideBallsItem));
        }
        updateSlideBallsItem(document.getElementsByClassName("inventory-item")[0]);
      });

    //Metodo para saltar de habitaci√≥n
    function jumpToRoom(i) {
      window.location.href = `Room${i}.html`;
      //window.location.href = `puzzleCorridor.html?fromRoom=${i}&boolRoom=1`;
    }
  </script>
</html>
